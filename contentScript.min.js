!function(a){a.fn.scrollEnd=function(b,c){a(this).scroll(function(){var d=a(this);d.data("scrollTimeout")&&clearTimeout(d.data("scrollTimeout")),d.data("scrollTimeout",setTimeout(b,c))})};var b={fn:{insert:function(){a("#facebook").prepend('<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,600,400" rel="stylesheet" type="text/css"><div class="popupMinified"><a class="open">Open</a></div><div class="popupMain"></div>'),a(".popupMain").fadeIn().prepend('<div class="content-container"><a class="close">Close</a><a class="minify">Minify</a> <div class="intro-screen"><img src="chrome-extension://pahaeemkffdhpnhabiidgpjpggdiadpj/ajax-loader.gif"/> <div class="text-container"> <p>Resonance</p><p>Grab the best tracks from Facebook &amp; put them directly into your Youtube</p><a class="starter">Get Started</a></div></div><div class="invalidToken"> <p>It looks like something went wrong with accessing Youtube, this sometimes happens, please refresh and try again</p></div><div class="notLinkThread"> <p>It looks like the thread(s) you selected contain(s) no youtube links</p></div><div class="scanner-loader-container"> <div class="text-container"> <h3>Now scanning page for links</h3> <p>If you&rsquo;ve selected 100 or above links this may take a minute or two</p><p>Please refrain from clicking on the page or changing tabs whilst this is happening</p></div><img class="scanner-loader" src="chrome-extension://pahaeemkffdhpnhabiidgpjpggdiadpj/ajax-loader.gif"/></div><form class="playlistInfo"> <legend>Please Select Resonance Preferences</legend> <fieldset> <label>Would you like to put these songs into an existing playlist or a newly created one?</label> <input class="existingPlaylist" type="radio" name="existingPlaylist" value="yes"> Existing Playlist <br><input class="existingPlaylist" type="radio" name="existingPlaylist" value="no"> New Playlist <br><div class="existing"> <label for="oldPlaylist">What is the ID of this playlist?</label> <input name="oldPlaylist" type="text" / placeholder="Playlist ID"><span class="explain">?</span> <div class="explanation"> <p>You can find your playlist ID by going to the playlist page on youtube and extracting it from the url</p><p><span class="explain-header">Example</span> <br><br>https://www.youtube.com/playlist?list=<strong>PLLE1K_p2t-JKUfeaaPCXqu8idT3wsOv4C</strong></p><p>The part in bold is your playlist ID</p>If this playlist is private its name will not appear in the upload info. It will however still have the links uploaded to it</p></div></div><div class="new"> <label for="playlistName">Name of new playlist</label> <input name="playlistName" type="text" / placeholder="Music Playlist"> </div><label>Would you like to extract links by number or thread?</label> <input class="numThread" type="radio" name="numThread" value="yes"> Number <br><input class="numThread" type="radio" name="numThread" value="no"> Thread <br><div class="linkNumberContainer"> <label for="linkNumber">How many links would you like to add</label> <select name="linkNumber"> <option>5</option> <option>10</option> <option>20</option> <option>30</option> <option>40</option> <option>50</option> <option>60</option> <option>70</option> <option>80</option> <option>90</option> <option>100</option> <option>200</option> </select> </div><div class="threadCollecter"> <p>Please click on the posts you would like to extract links from. When you are finished click done</p><p>Number of threads: <span class="threadNumber">Click done to see how many threads you have selected.</span></p><div class="doneButton">Done</div></div><div id="go">Get Your Music</div></fieldset> </form><div class="finish-screen"> <div class="upload-title"> <h2>Uploading Links to Youtube</h2></div><div class="loader-container"> <div class="loader loader-running"></div></div><div class="scanInfo"> <h3>Info</h3> <p><strong>Playlist Name: </strong><span class="playlistName"></span> <p> <p><strong>Links to be added: </strong><span class="linkNumber"></span> <p> </div><div class="failed-uploads"> <p><span class="errorNumber"></span> video<span class="plural">s</span><span class="plural2"> is</span> invalid and <span class="plural3">has</span> not been uploaded</p></div><p class="error-message">Oops, please make sure you are on a facebook group page before clicking GO</p><div class="duplicates-message"> <p class="all-duplicates">It appears that all the links you tried to add already exist in this playlist <p> <p class="duplicatesAndErrors">It appears that all the links you tried to add either already exist in this playlist or were invalid links</p><p class="numDuplicates"><span class="duplicates-number"></span> duplicate<span class="plural5">s </span>have been found</p></div><p class="invalidPlaylist">The playlist id you gave seems to be invalid please make sure you have entered it correctly. Refresh and try again</p><div class="success-message"> <p>Congratulations! Your playlist is now ready for you</p><a target="_blank" href="">Go to Playlist</a></div></div></div>')}},init:function(){b.fn.insert(),a(".success-message a").click(function(){location.reload()})}},c={numberofLinks:null,existingPlaylist:!1,existingName:"",newName:"",idArray:"",originalList:"",newPlaylistID:"",receivedLinks:"",existingLinks:[],idLength:"",nextPageToken:"",ajaxGetInitialised:!1,newLinkNumber:null,threadCounter:!1,changesCompleted:!1,threadStart:!1,threadFinish:!1,pageCount:0,validFBurl:function(c){var d=/^(http|https)\:\/\/www.facebook.com\/.*/i;c.match(d)?(a(".error-message").hide(),chrome.tabs.executeScript(null,{file:"jquery-1.11.2.min.js"},function(){chrome.tabs.executeScript(null,{file:"contentScript.js"}),chrome.tabs.insertCSS(null,{file:"popStyle.css"})})):(a(".error-message").show(),a(".scanner-loader-container").hide())},intervalCheck:function(b,d){b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(b),c.pageCount+=1},postLister:function(){a('.numThread[value="no"]').click(function(){c.threadStart=!0}),a(".mbm").click(function(){c.threadFinish===!1&&c.threadStart===!0&&a(this).toggleClass("chosenThread")}),a(document).on("DOMNodeInserted",function(b){a(b.target).is(".mbm")&&a(b.target).click(function(){c.threadFinish===!1&&c.threadStart===!0&&a(this).toggleClass("chosenThread")})}),a(".doneButton").click(function(){c.threadFinish=!0,a(".threadNumber").text(a(".chosenThread").length),a(".chosenThread").each(function(){if(a(this).find(".UFIPagerLink").length||a(this).find("._3399").length)if(0===a(this).find(".UFIPagerLink").length){var b=a(this).find("._524d ._ipm"),d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),b[0].dispatchEvent(d),a(this).find("._524d a").click(function(){event.preventDefault()}),a(this).find("._ipo ._ipm").trigger("click"),a(this).find(".UFIContainer .UFIPagerLink").trigger("click"),console.log(a(this));a(this);console.log(a(this).find(".UFIPagerLink")),console.log("success");var g=(a(this).find(".UFIPagerLink span"),a(this).find(".UFIPagerLink")),d=(a(this).find(".UFIRow"),document.createEvent("MouseEvents")),i=null,j=this;d.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),console.log("if passed"),setTimeout(function(){var b=a(j).find(".UFIContainer").children();b=a(b).children(),b=a(b).children(),b=b[0],b=a(b).find(".UFIPagerLink"),console.log(a(j).find(".UFIPagerLink").length),g=b,g[0].dispatchEvent(d),a(this).find(".UFIPagerLink span").trigger("click"),a(this).find(".UFIPagerLink").trigger("click"),a(this).find("._4oep").trigger("click"),a(".threadCollecter").append('<h2 class="threadWarning">Opening Thread, please wait</h2>'),a("#go").fadeOut(),i=setInterval(function(){c.intervalCheck(d,g[0]),c.pageCount>6&&(console.log(c.pageCount),clearInterval(i),a(".threadWarning").text("Thread opened, you may now get your music"),a(".doneButton").fadeOut(),a("#go").fadeIn())},1e3)},1e3)}else{a(this).find("._524d a").click(function(){event.preventDefault()}),a(this).find("._ipo ._ipm").trigger("click"),a(this).find(".UFIContainer .UFIPagerLink").trigger("click"),console.log(a(this));a(this);console.log(a(this).find(".UFIPagerLink")),console.log("success");var g=(a(this).find(".UFIPagerLink span"),a(this).find(".UFIPagerLink")),d=(a(this).find(".UFIRow"),document.createEvent("MouseEvents")),i=null,j=this;d.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),console.log("else"),g[0].dispatchEvent(d),a(this).find(".UFIPagerLink span").trigger("click"),a(this).find(".UFIPagerLink").trigger("click"),a(this).find("._4oep").trigger("click"),a(".threadCollecter").append('<h2 class="threadWarning">Opening Thread, please wait</h2>'),a("#go").fadeOut(),i=setInterval(function(){c.intervalCheck(d,g[0]),c.pageCount>6&&(console.log(c.pageCount),clearInterval(i),a(".threadWarning").text("Thread opened, you may now get your music"),a(".doneButton").fadeOut(),a("#go").fadeIn())},1e3)}})})},popupClose:function(){a(".close").click(function(){c.threadStart=!1,c.threadFinish=!1,a(".popupMain").remove(),a(".chosenThread").removeClass("chosenThread"),location.reload()})},popupMinify:function(){a(".minify").click(function(){a(".popupMain").slideUp("fast"),a(".popupMinified").show()}),a(".open").click(function(){a(".popupMain").slideDown("fast"),a(".popupMinified").hide()})},popupStart:function(){setTimeout(function(){a(".intro-screen > img").addClass("closed"),a(".intro-screen .text-container").addClass("open")},750),a(".starter").click(function(){a(".intro-screen").addClass("closed"),setTimeout(function(){a(".intro-screen").addClass("hidden"),a(".popupMain").addClass("opened"),a(".playlistInfo").addClass("opened")},400)})},createPlaylist:function(d){console.log(c.newName);var e={snippet:{title:c.newName}};a.ajax({method:"POST",url:"https://www.googleapis.com/youtube/v3/playlists?part=snippet",data:JSON.stringify(e),headers:{Authorization:"Bearer "+d},contentType:"application/json"}).done(function(a,b,d){console.log("Playlist created, data: ",a,d),c.newPlaylistID=a.id,console.log(c.newPlaylistID)})},ajaxArray:function(b,d){console.log(c.existingName);var e;if(d===!0)for(var f=0;f<c.idArray.length;f++)e={snippet:{playlistId:c.existingName,resourceId:{kind:"youtube#video",videoId:c.idArray[f]}}},b.push(e),console.log(c.idArray[f]);else for(var g=0;g<c.idArray.length;g++)e={snippet:{playlistId:c.newPlaylistID,resourceId:{kind:"youtube#video",videoId:c.idArray[g]}}},b.push(e),console.log(c.idArray[g])},init:function(){c.postLister(),c.popupClose(),c.popupMinify(),c.popupStart(),console.log("running formHandler"),a(".existing").hide(),a(".new").hide(),a(".linkNumberContainer").hide(),a(".threadCollecter").hide(),a(".existingPlaylist").click(function(){a('.existingPlaylist[value="yes"]').is(":checked")?(console.log("if"),a(".existing").slideDown(),a(".new").slideUp()):(console.log("else"),a(".new").slideDown(),a(".existing").slideUp())}),a(".numThread").click(function(){a('.numThread[value="yes"]').is(":checked")?(console.log("if"),a(".linkNumberContainer").slideDown(),a(".threadCollecter").slideUp()):(console.log("else"),a(".threadCollecter").slideDown(),a(".linkNumberContainer").slideUp())}),a(".explain").click(function(){console.log("explain clicked"),a(".popupMain .explanation").slideToggle()}),a("#go").on("click",function(){a(".scanner-loader-container").addClass("opened"),a(".playlistInfo").addClass("closed"),setTimeout(function(){a(".playlistInfo").addClass("hidden")},400),chrome.storage.local.clear(function(){var a=chrome.runtime.lastError;a&&console.error(a)}),c.numberofLinks=a("option:selected").html(),c.numberofLinks=parseInt(c.numberofLinks),a('.existingPlaylist[value="yes"]').is(":checked")?c.existingPlaylist=!0:c.existingPlaylist=!1,c.existingName=a('input[name="oldPlaylist"]').val(),c.newName=a('input[name="playlistName"]').val(),a('.numThread[value="no"]').is(":checked")&&(c.threadCounter=!0),console.log("formHandler.threadCounter = "+c.threadCounter),console.log(c.accessToken),void 0===c.accessToken&&(a(".popupMain > div").hide(),a(".invalidToken").show());var b=c.accessToken;c.createPlaylist(b),c.threadCounter===!1?d.regexFunctions.topScroller(c.numberofLinks):(console.log("running thread counter find link() function"),setTimeout(function(){d.regexFunctions.findLink()},2e3)),chrome.storage.onChanged.addListener(function(d,e){c.changesCompleted=!0,console.log("change received!"),console.log(d),setTimeout(function(){c.existingPlaylist===!1?a(".playlistName").text(c.newName):(console.log("here"),a.get("https://www.googleapis.com/youtube/v3/playlists?part=snippet&id="+c.existingName+"&key=AIzaSyBHRUtsTAr8xvNdUdXYkydgKxo6yGWkgq4",function(b){console.log(b),a(".playlistName").text(b.items[0].snippet.title),console.log(b.items[0].snippet.title)}),""===a(".playlistName").text()&&a(".playlistName").text("Set playlist to public to see playlist name")),chrome.storage.local.get("value",function(d){c.idArray=d.value[0],c.idLength=c.idArray.length,c.originalList=c.idArray.slice(0),console.log("These are the received ids: "+c.originalList),console.log("Number of ids received: "+c.idLength),c.receivedLinks=d.value[1],c.receivedLinks<c.numberofLinks&&c.threadCounter===!1&&a(".scanInfo").append("<p>It appears that the total number of links on this page was <strong>"+(c.numberofLinks-c.receivedLinks)+"</strong> links less then what you selected. </p>"),function(){function e(){if(finished===!1&&(a(".scanner-loader-container").fadeOut(),a(".loader-container").fadeIn(),a(".scanInfo").fadeIn(),a(".upload-title").fadeIn(),c.existingPlaylist===!0&&a(".numDuplicates").fadeIn(),a(".duplicates-number").fadeIn(),a(".duplicates-number").text(duplicatesFound.length)),c.idLength=c.idArray.length,current<d.length){console.log(d[current]),console.log("Acces Token: "+b);var f=current/d.length;a.ajax({method:"POST",url:"https://www.googleapis.com/youtube/v3/playlistItems?part=snippet",data:JSON.stringify(d[current]),headers:{Authorization:"Bearer "+b},contentType:"application/json",success:function(b){current++,console.log("This has been a success");var g=c.newLinkNumber-errorCount;console.log("Links minus errors: "+g),a(".linkNumber").text(g),a(".loader-running").css({width:294*f}),current==d.length-1?a(".loader-running").css({width:294}):a(".loader-running").css({width:294*f}),e()},error:function(b){current++,errorCount++,a(".plural").hide(),a(".failed-uploads").show(),a(".failed-uploads .errorNumber").html("<strong>"+errorCount+"</strong>"),console.log(c.newLinkNumber),console.log("errors counted: "+errorCount);var g=c.newLinkNumber-errorCount;console.log("Links minus errors: "+g),a(".linkNumber").text(g),errorCount>1&&(a(".plural").show(),a(".plural2").text(" are"),a(".plural3").text(" have")),console.log(b),current==d.length-1?a(".loader-running").css({width:294}):(a(".loader-running").css({width:294*f}),console.log(a(".linkNumber").text()),"0"==a(".linkNumber").text()&&(a(".scanner-loader-container").fadeOut(),a(".upload-title").fadeOut(),a(".failed-uploads").fadeOut(),a(".loader-container").fadeOut(),a(".scanInfo").fadeOut(),a(".numDuplicates").fadeOut(),a(".duplicatesAndErrors").show())),current<d.length&&e()}}).done(function(b,e,f){console.log("Song added, data: ",b,f),console.log(c.idArray),console.log("current step: "+current),console.log("Ajaxes.length - 1: "+(d.length-1)),current>=d.length-1&&(a(".loader-running").css({width:294}),a(".loader").removeClass("loader-running"),a(".loader-container").fadeOut(),finished=!0,a(".success-message").fadeIn("fast"),c.existingPlaylist===!1?a(".success-message a").attr("href","https://www.youtube.com/playlist?list="+c.newPlaylistID):a(".success-message a").attr("href","https://www.youtube.com/playlist?list="+c.existingName))})}}function f(){console.log("ajaxGet Next page has been initialised"),a.ajax({method:"GET",url:"https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+c.nextPageToken+"&part=snippet&maxResults=50&playlistId="+c.existingName+"&key=AIzaSyBHRUtsTAr8xvNdUdXYkydgKxo6yGWkgq4",headers:{Authorization:"Bearer "+b},contentType:"application/json"}).done(function(b,g,h){if(console.log("CurrentGet length: "+currentGet),console.log("formHandler.idLength: "+c.idLength),console.log(c.originalList),console.log("Duplicates data: ",b,h),console.log(b.items.length),b.items.length>1){var i="";console.log("Existing ID has been pushed to duplicates aray for cross checking: "+b.items[0].snippet.resourceId.videoId);for(var j=0;j<b.items.length;j++)if(currentGet++,console.log(b),console.log(b.items[j].snippet.resourceId.videoId),duplicates.push(b.items[j].snippet.resourceId.videoId),console.log("These are the existing ids used for cross checking: "+duplicates),console.log("This is the length of the cross checking array:"+duplicates.length),console.log("data items length: "+b.items.length),console.log("Current Get length: "+currentGet),50==b.items.length&&currentGet==b.items.length)console.log("End of page reached"),c.nextPageToken=b.nextPageToken,console.log("nextPage Token = "+b.nextPageToken),currentGet=0,f(),pages++;else if(currentGet==b.items.length){console.log(duplicates.length);for(var k=0;k<duplicates.length+1;k++)i=jQuery.inArray(duplicates[k],c.idArray),console.log("iterator length = "+k),i>=0&&(c.idArray.splice(i,1),duplicatesFound.push(duplicates[k]),console.log("This was removed from idArray: "+duplicates[k]),console.log("Links remaining in idArray: "+c.idArray.length),console.log("Remaining Array items: "+c.idArray),console.log("iterator length = "+k),console.log("Cross checking array length = "+duplicates.length)),k==duplicates.length&&(a(".scanner-loader-container").fadeOut(),0===c.idArray.length?a(".duplicates-message .all-duplicates").show():(console.log("running do_ajax()"),c.ajaxArray(d,!0),console.log("doing ajax"),console.log(d),c.newLinkNumber=c.idArray.length,e()),a(".duplicates-number").text(duplicates.length),duplicates.length>1&&a(".plural5").show())}}console.log("AjaxGetNext is done")})}function g(){a(".text-container h3").text("Checking existing playlist for duplicates"),console.log("ajaxGet has been initialised"),console.log("original list length: "+c.originalList.length),console.log("original list: "+c.originalList),console.log("currentGet number: "+currentGet),console.log("current videoID: "+c.originalList[currentGet]),a.ajax({method:"GET",url:"https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId="+c.existingName+"&key=AIzaSyBHRUtsTAr8xvNdUdXYkydgKxo6yGWkgq4",headers:{Authorization:"Bearer "+b},contentType:"application/json",error:function(b){a(".scanner-loader-container").fadeOut(),a(".invalidPlaylist").fadeIn()}}).done(function(b,g,h){if(console.log("CurrentGet length: "+currentGet),console.log("formHandler.idLength: "+c.idLength),console.log(c.originalList),console.log("Duplicates data: ",b,h),console.log(b.items.length),b.items.length>=1){var i="";console.log("Existing playlist ids "+b.items[0].snippet.resourceId.videoId);for(var j=0;j<b.items.length;j++)if(currentGet++,console.log(b),console.log(b.items[j].snippet.resourceId.videoId),duplicates.push(b.items[j].snippet.resourceId.videoId),console.log("Pushing the following exsting ids into a duplicates array for cross checking: "+duplicates),currentGet==b.items.length&&50==currentGet)c.nextPageToken=b.nextPageToken,console.log("nextPage Token = "+b.nextPageToken),console.log("End of page reached"),console.log("next page ajax running"),currentGet=0,f();else if(currentGet==b.items.length){console.log(duplicates.length);for(var k=0;k<duplicates.length;k++)i=jQuery.inArray(duplicates[k],c.idArray),console.log(k),i>=0&&(c.idArray.splice(i,1),duplicatesFound.push(duplicates[k]),console.log("This was removed from idArray: "+duplicates[k]),console.log("Links remaining in idArray: "+c.idArray.length),console.log("Remaining Array items: "+c.idArray)),k==duplicates.length-1&&(a(".scanner-loader-container").fadeOut(),0===c.idArray.length?a(".duplicates-message .all-duplicates").show():(console.log("running do_ajax()"),c.ajaxArray(d,!0),console.log("doing ajax"),console.log(d),c.newLinkNumber=c.idArray.length,e()),a(".duplicates-number").text(duplicates.length),duplicates.length>1&&a(".plural5").show())}}console.log("done function finished")})}var d=[];errorCount=0,current=0,currentGet=0,duplicates=[],duplicatesFound=[],pages=0,finished=!1,c.existingPlaylist!==!0?(console.log("if wins"),c.newLinkNumber=c.idArray.length,c.ajaxArray(d,!1),e()):(console.log("else wins"),c.ajaxGetInitialised===!1?(g(),c.ajaxGetInitialised=!0,console.log("formHandler.ajaxGetInitialised = "+c.ajaxGetInitialised)):(c.newLinkNumber=c.idArray.length,c.ajaxArray(d,!1),e()))}()})},600)})})}},d={receivedData:{numberofLinks:null,existingPlaylist:null,newName:null,existingName:null,stillScrolling:null,scrolled:!1,arrayCreated:!1,accessToken:null,extractorIteration:0,invalidThread:0,successThread:0,threadCount:0,secondRun:!1,dataStored:!1,pageTitle:a("#headerArea h1 a").text(),request:function(){var b=chrome.runtime.connect({name:"popup.js"});b.onMessage.addListener(function(a,b){if("hello"==a.greeting)return console.log(a.accessToken),c.accessToken=a.accessToken,!0})}},videoID:[],regexFunctions:{chromeStorage:function(b,c,d){setTimeout(function(){console.log("These items will be sent: "+b),chrome.storage.local.set({value:[b,c,d]},function(){console.log("Settings saved"),console.log("These items will be sent: "+b)})},100)},topScroller:function(e){void 0===d.scrolled&&(console.log("running"),a(document.body).scrollTop(0),d.scrolled=!0),d.stillScrolling=!0,a("html, body").animate({scrollTop:a(document).height()},100),setTimeout(function(){if(d.videoID.length<e)console.log(d.videoID.length),console.log("running second"),console.log(a("#contentArea .uiList").length),console.log("Is browser still scrolling: "+d.stillScrolling),d.stillScrolling===!0&&(d.regexFunctions.findLink(),d.regexFunctions.topScroller(c.numberofLinks)),a(window).scrollEnd(function(){console.log(d.stillScrolling),d.stillScrolling=!1;var a=d.videoID.length;void 0===d.arrayCreated&&(d.receivedData.rrayCreated=!0,d.regexFunctions.chromeStorage(d.videoID,a,d.receivedData.pageTitle))},5e3);else if(d.videoID.length==e){console.log(d.videoID);var b=d.videoID.length;console.log(d.arrayCreated),void 0===d.receivedData.arrayCreated&&(d.receivedData.rrayCreated=!0,d.regexFunctions.chromeStorage(d.videoID,b,d.receivedData.pageTitle))}},1e3)},extractVideoID:function(b){var c=b.toString().match("(youtu.be\\\\?/|v=)([a-zA-Z0-9_-]+)&?"),d="";for(var e in c)if(c[e].match("^[a-zA-Z0-9_-]+$")){d=c[e];break}var f=d;return f},anchorExtractor:function(e,f,g,h,i){if(console.log("extractor initiated"),console.log(e),""===e?(console.log("if1 passed"),d.receivedData.invalidThread+=1,console.log(d.receivedData.invalidThread),d.receivedData.invalidThread>1&&(console.log("errorCount: "+d.receivedData.invalidThread),console.log("iteration: "+h),console.log("if2 passed"))):d.receivedData.successThread+=1,console.log("errorCount: "+d.receivedData.invalidThread),console.log("successCount: "+d.receivedData.successThread),console.log("threadCount/iteration: "+d.receivedData.threadCount),console.log("regex item: "+f),console.log("linkCount: "+i),e.toLowerCase().indexOf("youtube")>=0){if(console.log("validationPassed"),a(g).addClass("youtubeLink"),a(g).hasClass("youtubeLink")&&(console.log("This is the number of youtube Links: "+a(".youtubeLink").length),d.videoID.length<c.numberofLinks||c.threadCounter===!0)){console.log(d.videoID.length);var j=jQuery.inArray(d.regexFunctions.extractVideoID(f),d.videoID);if(console.log("found: "+j),j>=0)console.log("Already exists in scan Array: "+j);else if(j<0||c.threadCounter===!0)if(console.log("This is the extracted ID: "+d.regexFunctions.extractVideoID(f)),""!==d.regexFunctions.extractVideoID(f)){if(console.log(d.regexFunctions.extractVideoID(f)),d.videoID.push(d.regexFunctions.extractVideoID(f)),console.log(d.videoID),c.threadCounter===!0&&(console.log("This is the iteration we are on: "+h),console.log("This is the length of threads selected: "+(a("#contentCol #contentArea #pagelet_group_ .chosenThread").length-1)),h==a("#contentCol #contentArea .chosenThread").length-1)){var k=d.videoID.length;console.log("success"),d.receivedData.secondRun===!0&&d.receivedData.invalidThread>0&&0===d.receivedData.successThread&&(a(".scanner-loader-container").hide(),a(".notLinkThread").show()),console.log("arrayCreated: "+d.receivedData.arrayCreated),d.receivedData.arrayCreated===!1&&(d.receivedData.arrayCreated=!0,console.log(d.videoID),d.regexFunctions.chromeStorage(d.videoID,k,d.receivedData.pageTitle))}}else console.log("This is the failed extraction: "+d.regexFunctions.extractVideoID(f))}}else console.log("linkCount: "+i)},findLink:function(){console.log("Is this a threadcounter process: "+c.threadCounter),c.threadCounter===!0?(console.log("threadCount: "+d.receivedData.threadCount),console.log("ThreadCounter running"),console.log(a(".chosenThread").length),a("#contentCol #contentArea .chosenThread").each(function(b){console.log("activating function inside of chosen thread");var g,c=a(this).find("._6m3 .mbs").html(),e=a(this).find("._6m3 ._59tj ._6lz").text(),f=d.receivedData.threadCount;d.receivedData.threadCount+=1,0===b?d.receivedData.extractorIteration+=b+1:d.receivedData.extractorIteration+=b,g=d.receivedData.extractorIteration,console.log(f),console.log("running extractor first time"),d.regexFunctions.anchorExtractor(e,c,this,f,g),a(this).find(".UFICommentContent").each(function(b){var c=a(this).find("._3-8y ._6m3 ._59tj ._6lz").text(),e=a(this).find("._6m3 .mbs").html();0===b?d.receivedData.extractorIteration+=b+1:d.receivedData.extractorIteration+=b,g=d.receivedData.extractorIteration,d.receivedData.secondRun=!0,console.log(f),console.log("running extractor second time"),d.regexFunctions.anchorExtractor(c,e,this,f,g)})})):a("#contentCol #contentArea #pagelet_group_ .mbm .mtm").not(".marked").each(function(b){a(this).addClass("marked");var c=a(this).find("._6m3 .mbs").html(),e=a(this).find("._6m3 ._59tj ._6lz").text();console.log("Total length equals: "+b),d.regexFunctions.anchorExtractor(e,c,this)})}}},e={init:function(){d.receivedData.request();var e;e=setInterval(function(){void 0!==c.accessToken&&(console.log(c.accessToken),b.init(),c.init(),clearInterval(e))},80)}};e.init()}(jQuery);