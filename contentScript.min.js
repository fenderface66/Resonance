!function(e){e.fn.scrollEnd=function(n,o){e(this).scroll(function(){var t=e(this);t.data("scrollTimeout")&&clearTimeout(t.data("scrollTimeout")),t.data("scrollTimeout",setTimeout(n,o))})};var n={fn:{insert:function(){e("#facebook").prepend('<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,600,400" rel="stylesheet" type="text/css"><div class="popupMinified"><a class="open">Open</a></div><div class="popupMain"></div>'),e(".popupMain").fadeIn().prepend('<div class="content-container"><a class="close">Close</a><a class="minify">Minify</a> <div class="intro-screen"><img src="chrome-extension://pahaeemkffdhpnhabiidgpjpggdiadpj/ajax-loader.gif"/> <div class="text-container"> <p>Resonance</p><p>Grab the best tracks from Facebook &amp; put them directly into your Youtube</p><a class="starter">Get Started</a></div></div><div class="invalidToken"> <p>It looks like something went wrong with accessing Youtube, this sometimes happens, please refresh and try again</p></div><div class="notLinkThread"> <p>It looks like the thread(s) you selected contain(s) no youtube links</p></div><div class="scanner-loader-container"> <div class="text-container"> <h3>Now scanning page for links</h3> <p>If you&rsquo;ve selected 100 or above links this may take a minute or two</p><p>Please refrain from clicking on the page or changing tabs whilst this is happening</p></div><img class="scanner-loader" src="chrome-extension://pahaeemkffdhpnhabiidgpjpggdiadpj/ajax-loader.gif"/></div><form class="playlistInfo"> <legend>Please Select Resonance Preferences</legend> <fieldset> <label>Would you like to put these songs into an existing playlist or a newly created one?</label> <input class="existingPlaylist" type="radio" name="existingPlaylist" value="yes"> Existing Playlist <br><input class="existingPlaylist" type="radio" name="existingPlaylist" value="no"> New Playlist <br><div class="existing"> <label for="oldPlaylist">What is the ID of this playlist?</label> <input name="oldPlaylist" type="text" / placeholder="Playlist ID"><span class="explain">?</span> <div class="explanation"> <p>You can find your playlist ID by going to the playlist page on youtube and extracting it from the url</p><p><span class="explain-header">Example</span> <br><br>https://www.youtube.com/playlist?list=<strong>PLLE1K_p2t-JKUfeaaPCXqu8idT3wsOv4C</strong></p><p>The part in bold is your playlist ID</p>If this playlist is private its name will not appear in the upload info. It will however still have the links uploaded to it</p></div></div><div class="new"> <label for="playlistName">Name of new playlist</label> <input name="playlistName" type="text" / placeholder="Music Playlist"> </div><label>Would you like to extract links by number or thread?</label> <input class="numThread" type="radio" name="numThread" value="yes"> Number <br><input class="numThread" type="radio" name="numThread" value="no"> Thread <br><div class="linkNumberContainer"> <label for="linkNumber">How many links would you like to add</label> <select name="linkNumber"> <option>5</option> <option>10</option> <option>20</option> <option>30</option> <option>40</option> <option>50</option> <option>60</option> <option>70</option> <option>80</option> <option>90</option> <option>100</option> <option>200</option> </select> </div><div class="threadCollecter"> <p>Please click on the posts you would like to extract links from. When you are finished click done</p><p>Number of threads: <span class="threadNumber">Click done to see how many threads you have selected.</span></p><div class="doneButton">Done</div></div><div id="go">Get Your Music</div></fieldset> </form><div class="finish-screen"> <div class="upload-title"> <h2>Uploading Links to Youtube</h2></div><div class="loader-container"> <div class="loader loader-running"></div></div><div class="scanInfo"> <h3>Info</h3> <p><strong>Playlist Name: </strong><span class="playlistName"></span> <p> <p><strong>Links to be added: </strong><span class="linkNumber"></span> <p> </div><div class="failed-uploads"> <p><span class="errorNumber"></span> video<span class="plural">s</span><span class="plural2"> is</span> invalid and <span class="plural3">has</span> not been uploaded</p></div><p class="error-message">Oops, please make sure you are on a facebook group page before clicking GO</p><div class="duplicates-message"> <p class="all-duplicates">It appears that all the links you tried to add already exist in this playlist <p> <p class="duplicatesAndErrors">It appears that all the links you tried to add either already exist in this playlist or were invalid links</p><p class="numDuplicates"><span class="duplicates-number"></span> duplicate<span class="plural5">s </span>have been found</p></div><p class="invalidPlaylist">The playlist id you gave seems to be invalid please make sure you have entered it correctly. Refresh and try again</p><div class="success-message"> <p>Congratulations! Your playlist is now ready for you</p><a target="_blank" href="">Go to Playlist</a></div></div></div>')}},init:function(){console.log("running insert"),n.fn.insert(),e(".success-message a").click(function(){location.reload()})}},o={numberofLinks:null,existingPlaylist:!1,existingName:"",newName:"",idArray:"",originalList:"",newPlaylistID:"",receivedLinks:"",existingLinks:[],idLength:"",nextPageToken:"",ajaxGetInitialised:!1,newLinkNumber:null,threadCounter:!1,changesCompleted:!1,threadStart:!1,threadFinish:!1,pageCount:0,validFBurl:function(n){var o=/^(http|https)\:\/\/www.facebook.com\/.*/i;n.match(o)?(e(".error-message").hide(),chrome.tabs.executeScript(null,{file:"jquery-1.11.2.min.js"},function(){chrome.tabs.executeScript(null,{file:"contentScript.js"}),chrome.tabs.insertCSS(null,{file:"popStyle.css"})})):(e(".error-message").show(),e(".scanner-loader-container").hide())},intervalCheck:function(e,n){e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(e),o.pageCount+=1},postLister:function(){e('.numThread[value="no"]').click(function(){o.threadStart=!0}),e(".mbm").click(function(){o.threadFinish===!1&&o.threadStart===!0&&e(this).toggleClass("chosenThread")}),e(document).on("DOMNodeInserted",function(n){e(n.target).is(".mbm")&&e(n.target).click(function(){o.threadFinish===!1&&o.threadStart===!0&&e(this).toggleClass("chosenThread")})}),e(".doneButton").click(function(){o.threadFinish=!0,e(".threadNumber").text(e(".chosenThread").length),e(".chosenThread").each(function(){if(e(this).find(".UFIPagerLink").length||e(this).find("._3399").length)if(0===e(this).find(".UFIPagerLink").length){var n=e(this).find("._524d ._ipm"),t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n[0].dispatchEvent(t),e(this).find("._524d a").click(function(){event.preventDefault()}),e(this).find("._ipo ._ipm").trigger("click"),e(this).find(".UFIContainer .UFIPagerLink").trigger("click"),console.log(e(this));e(this);console.log(e(this).find(".UFIPagerLink")),console.log("success");var i=(e(this).find(".UFIPagerLink span"),e(this).find(".UFIPagerLink")),t=(e(this).find(".UFIRow"),document.createEvent("MouseEvents")),a=null,s=this;t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),console.log("if passed"),setTimeout(function(){var n=e(s).find(".UFIContainer").children();n=e(n).children(),n=e(n).children(),n=n[0],n=e(n).find(".UFIPagerLink"),console.log(e(s).find(".UFIPagerLink").length),i=n,i[0].dispatchEvent(t),e(this).find(".UFIPagerLink span").trigger("click"),e(this).find(".UFIPagerLink").trigger("click"),e(this).find("._4oep").trigger("click"),e(".threadCollecter").append('<h2 class="threadWarning">Opening Thread, please wait</h2>'),e("#go").fadeOut(),a=setInterval(function(){o.intervalCheck(t,i[0]),o.pageCount>6&&(console.log(o.pageCount),clearInterval(a),e(".threadWarning").text("Thread opened, you may now get your music"),e(".doneButton").fadeOut(),e("#go").fadeIn())},1e3)},1e3)}else{e(this).find("._524d a").click(function(){event.preventDefault()}),e(this).find("._ipo ._ipm").trigger("click"),e(this).find(".UFIContainer .UFIPagerLink").trigger("click"),console.log(e(this));e(this);console.log(e(this).find(".UFIPagerLink")),console.log("success");var i=(e(this).find(".UFIPagerLink span"),e(this).find(".UFIPagerLink")),t=(e(this).find(".UFIRow"),document.createEvent("MouseEvents")),a=null,s=this;t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),console.log("else"),i[0].dispatchEvent(t),e(this).find(".UFIPagerLink span").trigger("click"),e(this).find(".UFIPagerLink").trigger("click"),e(this).find("._4oep").trigger("click"),e(".threadCollecter").append('<h2 class="threadWarning">Opening Thread, please wait</h2>'),e("#go").fadeOut(),a=setInterval(function(){o.intervalCheck(t,i[0]),o.pageCount>6&&(console.log(o.pageCount),clearInterval(a),e(".threadWarning").text("Thread opened, you may now get your music"),e(".doneButton").fadeOut(),e("#go").fadeIn())},1e3)}})})},popupClose:function(){e(".close").click(function(){o.threadStart=!1,o.threadFinish=!1,e(".popupMain").remove(),e(".chosenThread").removeClass("chosenThread"),location.reload()})},popupMinify:function(){e(".minify").click(function(){e(".popupMain").slideUp("fast"),e(".popupMinified").show()}),e(".open").click(function(){e(".popupMain").slideDown("fast"),e(".popupMinified").hide()})},popupStart:function(){setTimeout(function(){e(".intro-screen > img").addClass("closed"),e(".intro-screen .text-container").addClass("open")},750),e(".starter").click(function(){e(".intro-screen").addClass("closed"),setTimeout(function(){e(".intro-screen").addClass("hidden"),e(".popupMain").addClass("opened"),e(".playlistInfo").addClass("opened")},400)})},createPlaylist:function(n){console.log(o.newName);var t={snippet:{title:o.newName}};e.ajax({method:"POST",url:"https://www.googleapis.com/youtube/v3/playlists?part=snippet",data:JSON.stringify(t),headers:{Authorization:"Bearer "+n},contentType:"application/json"}).done(function(e,n,t){console.log("Playlist created, data: ",e,t),o.newPlaylistID=e.id,console.log(o.newPlaylistID)})},ajaxArray:function(e,n){console.log(o.existingName);var t;if(n===!0)for(var i=0;i<o.idArray.length;i++)t={snippet:{playlistId:o.existingName,resourceId:{kind:"youtube#video",videoId:o.idArray[i]}}},e.push(t),console.log(o.idArray[i]);else for(var a=0;a<o.idArray.length;a++)t={snippet:{playlistId:o.newPlaylistID,resourceId:{kind:"youtube#video",videoId:o.idArray[a]}}},e.push(t),console.log(o.idArray[a])},init:function(){o.postLister(),o.popupClose(),o.popupMinify(),o.popupStart(),console.log("running formHandler"),e(".existing").hide(),e(".new").hide(),e(".linkNumberContainer").hide(),e(".threadCollecter").hide(),e(".existingPlaylist").click(function(){e('.existingPlaylist[value="yes"]').is(":checked")?(console.log("if"),e(".existing").slideDown(),e(".new").slideUp()):(console.log("else"),e(".new").slideDown(),e(".existing").slideUp())}),e(".numThread").click(function(){e('.numThread[value="yes"]').is(":checked")?(console.log("if"),e(".linkNumberContainer").slideDown(),e(".threadCollecter").slideUp()):(console.log("else"),e(".threadCollecter").slideDown(),e(".linkNumberContainer").slideUp())}),e(".explain").click(function(){console.log("explain clicked"),e(".popupMain .explanation").slideToggle()}),e("#go").on("click",function(){e(".scanner-loader-container").addClass("opened"),e(".playlistInfo").addClass("closed"),setTimeout(function(){e(".playlistInfo").addClass("hidden")},400),chrome.storage.local.clear(function(){var e=chrome.runtime.lastError;e&&console.error(e)}),o.numberofLinks=e("option:selected").html(),o.numberofLinks=parseInt(o.numberofLinks),e('.existingPlaylist[value="yes"]').is(":checked")?o.existingPlaylist=!0:o.existingPlaylist=!1,o.existingName=e('input[name="oldPlaylist"]').val(),o.newName=e('input[name="playlistName"]').val(),e('.numThread[value="no"]').is(":checked")&&(o.threadCounter=!0),console.log("formHandler.threadCounter = "+o.threadCounter),console.log(o.accessToken),void 0===o.accessToken&&(e(".popupMain > div").hide(),e(".invalidToken").show());var n=o.accessToken;o.createPlaylist(n),o.threadCounter===!1?t.regexFunctions.topScroller(o.numberofLinks):(console.log("running thread counter find link() function"),setTimeout(function(){t.regexFunctions.findLink()},2e3)),chrome.storage.onChanged.addListener(function(t,i){o.changesCompleted=!0,console.log("change received!"),console.log(t),setTimeout(function(){o.existingPlaylist===!1?e(".playlistName").text(o.newName):(console.log("here"),e.get("https://www.googleapis.com/youtube/v3/playlists?part=snippet&id="+o.existingName+"&key=AIzaSyBHRUtsTAr8xvNdUdXYkydgKxo6yGWkgq4",function(n){console.log(n),e(".playlistName").text(n.items[0].snippet.title),console.log(n.items[0].snippet.title)}),""===e(".playlistName").text()&&e(".playlistName").text("Set playlist to public to see playlist name")),chrome.storage.local.get("value",function(t){o.idArray=t.value[0],o.idLength=o.idArray.length,o.originalList=o.idArray.slice(0),console.log("These are the received ids: "+o.originalList),console.log("Number of ids received: "+o.idLength),o.receivedLinks=t.value[1],o.receivedLinks<o.numberofLinks&&o.threadCounter===!1&&e(".scanInfo").append("<p>It appears that the total number of links on this page was <strong>"+(o.numberofLinks-o.receivedLinks)+"</strong> links less then what you selected. </p>"),function(){function t(){if(finished===!1&&(e(".scanner-loader-container").fadeOut(),e(".loader-container").fadeIn(),e(".scanInfo").fadeIn(),e(".upload-title").fadeIn(),o.existingPlaylist===!0&&e(".numDuplicates").fadeIn(),e(".duplicates-number").fadeIn(),e(".duplicates-number").text(duplicatesFound.length)),o.idLength=o.idArray.length,current<s.length){console.log(s[current]),console.log("Acces Token: "+n);var i=current/s.length;e.ajax({method:"POST",url:"https://www.googleapis.com/youtube/v3/playlistItems?part=snippet",data:JSON.stringify(s[current]),headers:{Authorization:"Bearer "+n},contentType:"application/json",success:function(n){current++,console.log("This has been a success");var a=o.newLinkNumber-errorCount;console.log("Links minus errors: "+a),e(".linkNumber").text(a),e(".loader-running").css({width:294*i}),current==s.length-1?e(".loader-running").css({width:294}):e(".loader-running").css({width:294*i}),t()},error:function(n){current++,errorCount++,e(".plural").hide(),e(".failed-uploads").show(),e(".failed-uploads .errorNumber").html("<strong>"+errorCount+"</strong>"),console.log(o.newLinkNumber),console.log("errors counted: "+errorCount);var a=o.newLinkNumber-errorCount;console.log("Links minus errors: "+a),e(".linkNumber").text(a),errorCount>1&&(e(".plural").show(),e(".plural2").text(" are"),e(".plural3").text(" have")),console.log(n),current==s.length-1?e(".loader-running").css({width:294}):(e(".loader-running").css({width:294*i}),console.log(e(".linkNumber").text()),"0"==e(".linkNumber").text()&&(e(".scanner-loader-container").fadeOut(),e(".upload-title").fadeOut(),e(".failed-uploads").fadeOut(),e(".loader-container").fadeOut(),e(".scanInfo").fadeOut(),e(".numDuplicates").fadeOut(),e(".duplicatesAndErrors").show())),current<s.length&&t()}}).done(function(n,t,i){console.log("Song added, data: ",n,i),console.log(o.idArray),console.log("current step: "+current),console.log("Ajaxes.length - 1: "+(s.length-1)),current>=s.length-1&&(e(".loader-running").css({width:294}),e(".loader").removeClass("loader-running"),e(".loader-container").fadeOut(),finished=!0,e(".success-message").fadeIn("fast"),o.existingPlaylist===!1?e(".success-message a").attr("href","https://www.youtube.com/playlist?list="+o.newPlaylistID):e(".success-message a").attr("href","https://www.youtube.com/playlist?list="+o.existingName))})}}function i(){console.log("ajaxGet Next page has been initialised"),e.ajax({method:"GET",url:"https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+o.nextPageToken+"&part=snippet&maxResults=50&playlistId="+o.existingName+"&key=AIzaSyBHRUtsTAr8xvNdUdXYkydgKxo6yGWkgq4",headers:{Authorization:"Bearer "+n},contentType:"application/json"}).done(function(n,a,l){if(console.log("CurrentGet length: "+currentGet),console.log("formHandler.idLength: "+o.idLength),console.log(o.originalList),console.log("Duplicates data: ",n,l),console.log(n.items.length),n.items.length>1){var r="";console.log("Existing ID has been pushed to duplicates aray for cross checking: "+n.items[0].snippet.resourceId.videoId);for(var c=0;c<n.items.length;c++)if(currentGet++,console.log(n),console.log(n.items[c].snippet.resourceId.videoId),duplicates.push(n.items[c].snippet.resourceId.videoId),console.log("These are the existing ids used for cross checking: "+duplicates),console.log("This is the length of the cross checking array:"+duplicates.length),console.log("data items length: "+n.items.length),console.log("Current Get length: "+currentGet),50==n.items.length&&currentGet==n.items.length)console.log("End of page reached"),o.nextPageToken=n.nextPageToken,console.log("nextPage Token = "+n.nextPageToken),currentGet=0,i(),pages++;else if(currentGet==n.items.length){console.log(duplicates.length);for(var d=0;d<duplicates.length+1;d++)r=jQuery.inArray(duplicates[d],o.idArray),console.log("iterator length = "+d),r>=0&&(o.idArray.splice(r,1),duplicatesFound.push(duplicates[d]),console.log("This was removed from idArray: "+duplicates[d]),console.log("Links remaining in idArray: "+o.idArray.length),console.log("Remaining Array items: "+o.idArray),console.log("iterator length = "+d),console.log("Cross checking array length = "+duplicates.length)),d==duplicates.length&&(e(".scanner-loader-container").fadeOut(),0===o.idArray.length?e(".duplicates-message .all-duplicates").show():(console.log("running do_ajax()"),o.ajaxArray(s,!0),console.log("doing ajax"),console.log(s),o.newLinkNumber=o.idArray.length,t()),e(".duplicates-number").text(duplicates.length),duplicates.length>1&&e(".plural5").show())}}console.log("AjaxGetNext is done")})}function a(){e(".text-container h3").text("Checking existing playlist for duplicates"),console.log("ajaxGet has been initialised"),console.log("original list length: "+o.originalList.length),console.log("original list: "+o.originalList),console.log("currentGet number: "+currentGet),console.log("current videoID: "+o.originalList[currentGet]),e.ajax({method:"GET",url:"https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId="+o.existingName+"&key=AIzaSyBHRUtsTAr8xvNdUdXYkydgKxo6yGWkgq4",headers:{Authorization:"Bearer "+n},contentType:"application/json",error:function(n){e(".scanner-loader-container").fadeOut(),e(".invalidPlaylist").fadeIn()}}).done(function(n,a,l){if(console.log("CurrentGet length: "+currentGet),console.log("formHandler.idLength: "+o.idLength),console.log(o.originalList),console.log("Duplicates data: ",n,l),console.log(n.items.length),n.items.length>=1){var r="";console.log("Existing playlist ids "+n.items[0].snippet.resourceId.videoId);for(var c=0;c<n.items.length;c++)if(currentGet++,console.log(n),console.log(n.items[c].snippet.resourceId.videoId),duplicates.push(n.items[c].snippet.resourceId.videoId),console.log("Pushing the following exsting ids into a duplicates array for cross checking: "+duplicates),currentGet==n.items.length&&50==currentGet)o.nextPageToken=n.nextPageToken,console.log("nextPage Token = "+n.nextPageToken),console.log("End of page reached"),console.log("next page ajax running"),currentGet=0,i();else if(currentGet==n.items.length){console.log(duplicates.length);for(var d=0;d<duplicates.length;d++)r=jQuery.inArray(duplicates[d],o.idArray),console.log(d),r>=0&&(o.idArray.splice(r,1),duplicatesFound.push(duplicates[d]),console.log("This was removed from idArray: "+duplicates[d]),console.log("Links remaining in idArray: "+o.idArray.length),console.log("Remaining Array items: "+o.idArray)),d==duplicates.length-1&&(e(".scanner-loader-container").fadeOut(),0===o.idArray.length?e(".duplicates-message .all-duplicates").show():(console.log("running do_ajax()"),o.ajaxArray(s,!0),console.log("doing ajax"),console.log(s),o.newLinkNumber=o.idArray.length,t()),e(".duplicates-number").text(duplicates.length),duplicates.length>1&&e(".plural5").show())}}console.log("done function finished")})}var s=[];errorCount=0,current=0,currentGet=0,duplicates=[],duplicatesFound=[],pages=0,finished=!1,o.existingPlaylist!==!0?(console.log("if wins"),o.newLinkNumber=o.idArray.length,o.ajaxArray(s,!1),t()):(console.log("else wins"),o.ajaxGetInitialised===!1?(a(),o.ajaxGetInitialised=!0,console.log("formHandler.ajaxGetInitialised = "+o.ajaxGetInitialised)):(o.newLinkNumber=o.idArray.length,o.ajaxArray(s,!1),t()))}()})},600)})})}},t={receivedData:{numberofLinks:null,existingPlaylist:null,newName:null,existingName:null,stillScrolling:null,scrolled:!1,arrayCreated:!1,accessToken:null,extractorIteration:0,invalidThread:0,successThread:0,threadCount:0,secondRun:!1,dataStored:!1,request:function(){var e=chrome.runtime.connect({name:"popup.js"});e.onMessage.addListener(function(e,n){return"hello"==e.greeting?(console.log(e.accessToken),o.accessToken=e.accessToken,!0):void 0})}},videoID:[],regexFunctions:{chromeStorage:function(e,n){setTimeout(function(){console.log("These items will be sent: "+e),chrome.storage.local.set({value:[e,n]},function(){console.log("Settings saved"),console.log("These items will be sent: "+e)})},100)},topScroller:function(n){void 0===t.scrolled&&(console.log("running"),e(document.body).scrollTop(0),t.scrolled=!0),t.stillScrolling=!0,e("html, body").animate({scrollTop:e(document).height()},100),setTimeout(function(){if(t.videoID.length<n)console.log(t.videoID.length),console.log("running second"),console.log(e("#contentArea .uiList").length),console.log("Is browser still scrolling: "+t.stillScrolling),t.stillScrolling===!0&&(t.regexFunctions.findLink(),t.regexFunctions.topScroller(o.numberofLinks)),e(window).scrollEnd(function(){console.log(t.stillScrolling),t.stillScrolling=!1;var e=t.videoID.length;void 0===t.arrayCreated&&(t.receivedData.rrayCreated=!0,t.regexFunctions.chromeStorage(t.videoID,e))},5e3);else if(t.videoID.length==n){console.log(t.videoID);var i=t.videoID.length;console.log(t.arrayCreated),void 0===t.receivedData.arrayCreated&&(t.receivedData.rrayCreated=!0,t.regexFunctions.chromeStorage(t.videoID,i))}},1e3)},extractVideoID:function(e){var n=e.toString().match("(youtu.be\\\\?/|v=)([a-zA-Z0-9_-]+)&?"),o="";for(var t in n)if(n[t].match("^[a-zA-Z0-9_-]+$")){o=n[t];break}var i=o;return i},anchorExtractor:function(n,i,a,s,l){if(console.log("extractor initiated"),console.log(n),""===n?(console.log("if1 passed"),t.receivedData.invalidThread+=1,console.log(t.receivedData.invalidThread),t.receivedData.invalidThread>1&&(console.log("errorCount: "+t.receivedData.invalidThread),console.log("iteration: "+s),console.log("if2 passed"))):t.receivedData.successThread+=1,console.log("errorCount: "+t.receivedData.invalidThread),console.log("successCount: "+t.receivedData.successThread),console.log("threadCount/iteration: "+t.receivedData.threadCount),console.log("regex item: "+i),console.log("linkCount: "+l),n.toLowerCase().indexOf("youtube")>=0){if(console.log("validationPassed"),e(a).addClass("youtubeLink"),e(a).hasClass("youtubeLink")&&(console.log("This is the number of youtube Links: "+e(".youtubeLink").length),t.videoID.length<o.numberofLinks||o.threadCounter===!0)){console.log(t.videoID.length);var r=jQuery.inArray(t.regexFunctions.extractVideoID(i),t.videoID);if(console.log("found: "+r),r>=0)console.log("Already exists in scan Array: "+r);else if(0>r||o.threadCounter===!0)if(console.log("This is the extracted ID: "+t.regexFunctions.extractVideoID(i)),""!==t.regexFunctions.extractVideoID(i)){if(console.log(t.regexFunctions.extractVideoID(i)),t.videoID.push(t.regexFunctions.extractVideoID(i)),console.log(t.videoID),o.threadCounter===!0&&(console.log("This is the iteration we are on: "+s),console.log("This is the length of threads selected: "+(e("#contentCol #contentArea #pagelet_group_ .chosenThread").length-1)),s==e("#contentCol #contentArea .chosenThread").length-1)){var c=t.videoID.length;console.log("success"),t.receivedData.secondRun===!0&&t.receivedData.invalidThread>0&&0===t.receivedData.successThread&&(e(".scanner-loader-container").hide(),e(".notLinkThread").show(),console.log("this one is running")),console.log("arrayCreated: "+t.receivedData.arrayCreated),t.receivedData.arrayCreated===!1&&(t.receivedData.arrayCreated=!0,console.log(t.videoID),t.regexFunctions.chromeStorage(t.videoID,c))}}else console.log("This is the failed extraction: "+t.regexFunctions.extractVideoID(i))}}else console.log("linkCount: "+l)},findLink:function(){console.log("Is this a threadcounter process: "+o.threadCounter),o.threadCounter===!0?(console.log("threadCount: "+t.receivedData.threadCount),console.log("ThreadCounter running"),console.log(e(".chosenThread").length),e("#contentCol #contentArea .chosenThread").each(function(n){console.log("activating function inside of chosen thread");var o,i=e(this).find("._6m3 .mbs").html(),a=e(this).find("._6m3 ._59tj ._6lz").text(),s=t.receivedData.threadCount;t.receivedData.threadCount+=1,0===n?t.receivedData.extractorIteration+=n+1:t.receivedData.extractorIteration+=n,o=t.receivedData.extractorIteration,console.log(s),console.log("running extractor first time"),t.regexFunctions.anchorExtractor(a,i,this,s,o),e(this).find(".UFICommentContent").each(function(n){var i=e(this).find("._3-8y ._6m3 ._59tj ._6lz").text(),a=e(this).find("._6m3 .mbs").html();0===n?t.receivedData.extractorIteration+=n+1:t.receivedData.extractorIteration+=n,o=t.receivedData.extractorIteration,t.receivedData.secondRun=!0,console.log(s),console.log("running extractor second time"),t.regexFunctions.anchorExtractor(i,a,this,s,o)})})):e("#contentCol #contentArea #pagelet_group_ .mbm .mtm").not(".marked").each(function(n){e(this).addClass("marked");var o=e(this).find("._6m3 .mbs").html(),i=e(this).find("._6m3 ._59tj ._6lz").text();console.log("Total length equals: "+n),t.regexFunctions.anchorExtractor(i,o,this)})}}},i={init:function(){t.receivedData.request();var e;e=setInterval(function(){void 0!==o.accessToken&&(console.log(o.accessToken),n.init(),o.init(),clearInterval(e))},80)}};i.init()}(jQuery);